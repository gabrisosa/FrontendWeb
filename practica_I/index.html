<html>
    <head>
        <title>Space Invaders</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <div id="fondo">
            <div id="heroe"></div>
            <div id="misiles"></div>
        </div>
    
    <script>

        var heroe = {
            top: 700,
            left: 575
        }

        var arrayMisiles = []

        document.onkeydown = function(e) {
            console.log(e)
            if (e.keyCode == 37) {
                console.log("IZQUIERDA")
                heroe.left = heroe.left - 10;
                moverHeroe()
            }

            else if (e.keyCode == 39) {
                console.log("DERECHA")
                heroe.left = heroe.left + 10;
                moverHeroe()
            }

            if (e.keyCode == 32) {
                console.log("DISPARO")
                arrayMisiles.push({
                    left: heroe.left,
                    top: heroe.top
                })
                dibujarMisiles()
            }
            
        }

        function moverHeroe() {
            document.getElementById('heroe').style.left = heroe.left + "px";
        }

        function dibujarMisiles() {
            document.getElementById('misiles').innerHTML = "";
            for(var m = 0; m < arrayMisiles.length; m++) {
                document.getElementById('misiles').innerHTML += 
                `<div class='misil' style='
                    left: ${arrayMisiles[m].left}px;
                    top:${arrayMisiles[m].top}px'>
                </div>`
            }
        }

        function moverMisiles() {
            for(var m = 0; m < arrayMisiles.length; m++) {
                arrayMisiles[m].top = arrayMisiles[m].top - 5;
            }
        }

        function gameLoop() {
            setTimeout(gameLoop, 10)
            moverMisiles();
            dibujarMisiles();
        }

        gameLoop()

    </script>

    </body>
</html>